{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/peterbassett/Documents/Projects/mcma-kitchen-volunteers/src/app/page.js"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\n\nexport default function Home() {\n  const [events, setEvents] = useState([]);\n\n  useEffect(() => {\n    fetch('/api/get-events')\n      .then(res => res.json())\n      .then(data => setEvents(data || []))\n      .catch(err => console.error('Fetch failed:', err));\n  }, []);\n\n  function parseGoogleDate(date) {\n    if (typeof date === 'number') {\n      // Google Sheets serial number (days since 1899-12-30)\n      const base = new Date(Date.UTC(1899, 11, 30));\n      return new Date(base.getTime() + date * 86400000);\n    } else if (typeof date === 'string') {\n      const trimmed = date.trim();\n      // Attempt to convert \"Sat, 05-11-25\" to Date\n      const parts = trimmed.split(', ')[1]?.split('-');\n      if (parts?.length === 3) {\n        const month = parseInt(parts[0], 10) - 1;\n        const day = parseInt(parts[1], 10);\n        const year = 2000 + parseInt(parts[2], 10);\n        return new Date(year, month, day);\n      }\n    }\n    return null;\n  }\n\n  function toggleAttendance(row, index, checked) {\n    fetch('/api/update-attendance', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        row,\n        index,\n        checked: checked ? '👍' : ''\n      }),\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 'OK') alert('Attendance saved ✔');\n        else alert('Error saving attendance');\n      })\n      .catch(() => alert('Network error'));\n  }\n\n  const today = new Date();\n  const pastEvents = [];\n  const futureEvents = [];\n\n  if (Array.isArray(events)) {\n    events.forEach((row, rowIndex) => {\n      const parsedDate = parseGoogleDate(row[0]);\n      if (!parsedDate) return;\n\n      const eventObj = { row, rowIndex, parsedDate };\n      if (parsedDate >= today) {\n        futureEvents.push(eventObj);\n      } else {\n        pastEvents.push(eventObj);\n      }\n    });\n\n    // Optional: Sort by date\n    futureEvents.sort((a, b) => a.parsedDate - b.parsedDate);\n    pastEvents.sort((a, b) => b.parsedDate - a.parsedDate);\n  } else {\n    console.error('Events is not an array:', events);\n  }\n\n  function renderEventGroup(eventsList, title, color) {\n    return (\n      <>\n        <h3 style={{ color, marginTop: '32px' }}>{title}</h3>\n        {eventsList.map(({ row, rowIndex, parsedDate }) => {\n          const formattedDate = parsedDate.toDateString();\n          const [_, eventName, expected, lead, leadPhone,\n            vol1, phone1, vol2, phone2, vol3, phone3, vol4, phone4, vol5, phone5,\n            att1, att2, att3, att4, att5] = row;\n\n          return (\n            <div key={rowIndex} style={{ background: 'white', padding: '16px', marginBottom: '24px', borderRadius: '10px' }}>\n              <div style={{ fontWeight: 'bold', marginBottom: '8px' }}>\n                {eventName} ({formattedDate})\n              </div>\n              {expected && <div style={{ marginBottom: '8px', color: '#777' }}>Expected attendees: {expected}</div>}\n\n              {[\n                [vol1, phone1, att1],\n                [vol2, phone2, att2],\n                [vol3, phone3, att3],\n                [vol4, phone4, att4],\n                [vol5, phone5, att5],\n              ].map(([vol, phone, att], i) => (\n                vol ? (\n                  <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '12px' }}>\n                    <label>\n                      <input\n                        type=\"checkbox\"\n                        defaultChecked={att === '👍' || att === 'TRUE'}\n                        onChange={e => toggleAttendance(rowIndex + 2, i + 1, e.target.checked)}\n                      /> {vol}\n                    </label>\n                    {phone && (\n                      <a href={`sms:${phone}`} style={buttonStyle}>{phone}</a>\n                    )}\n                  </div>\n                ) : null\n              ))}\n            </div>\n          );\n        })}\n      </>\n    );\n  }\n\n  return (\n    <div style={{ padding: '16px', fontFamily: 'sans-serif', background: '#f2f2f2' }}>\n      <h2 style={{ textAlign: 'center', padding: '12px 0' }}>MCMA Kitchen Volunteers</h2>\n      {renderEventGroup(futureEvents, '🔵 Upcoming Events', 'navy')}\n      {renderEventGroup(pastEvents, '⚫ Past Events', 'black')}\n    </div>\n  );\n}\n\nconst buttonStyle = {\n  marginLeft: 'auto',\n  background: '#0079c2',\n  color: 'white',\n  padding: '6px 12px',\n  borderRadius: '6px',\n  textDecoration: 'none',\n  fontSize: '0.9em',\n  fontFamily: 'monospace',\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///Users/peterbassett/Documents/Projects/mcma-kitchen-volunteers/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAczC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;YAEP;QACF,OAAO;;QAMP;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/peterbassett/Documents/Projects/mcma-kitchen-volunteers/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///Users/peterbassett/Documents/Projects/mcma-kitchen-volunteers/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}}]
}